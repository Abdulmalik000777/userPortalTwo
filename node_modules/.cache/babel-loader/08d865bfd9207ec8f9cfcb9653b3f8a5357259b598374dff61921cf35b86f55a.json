{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import\"../pages/UserManagement.css\";// Correct path to UserManagement.css in pages folder\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UserManagement(){const[users,setUsers]=useState([]);const navigate=useNavigate();// Fetch users when the component mounts\nuseEffect(()=>{fetchUsers();},[]);// Empty dependency array ensures this only runs once on mount\nconst fetchUsers=async()=>{try{const response=await fetch(\"http://localhost:5000/users\");if(response.ok){const data=await response.json();setUsers(data);// Update the state with the fetched users\n}else{console.error(\"Error fetching users:\",response.statusText);}}catch(error){console.error(\"Error fetching users:\",error);}};// WebSocket connection for live updates (optional)\nuseEffect(()=>{const socket=new WebSocket('ws://localhost:5000/ws');socket.onopen=()=>{console.log('WebSocket connected');};socket.onmessage=event=>{const data=JSON.parse(event.data);console.log('Received data from WebSocket:',data);// You can update the state based on the message received from the WebSocket\n};socket.onerror=error=>{console.log('WebSocket error:',error);};socket.onclose=()=>{console.log('WebSocket connection closed');};// Cleanup WebSocket connection on component unmount\nreturn()=>{socket.close();};},[]);const toggleBlock=id=>{setUsers(users.map(user=>user.id===id?{...user,blocked:!user.blocked}:user));};const deleteUser=id=>{setUsers(users.filter(user=>user.id!==id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"user-management-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Management\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/\"),children:\"Go to Login\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last Seen\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.length>0?users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.lastSeen||\"N/A\"}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleBlock(user.id),children:user.blocked?\"Unblock\":\"Block\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteUser(user.id),children:\"Delete\"})]})]},user.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",children:\"No users found\"})})})]})]});}export default UserManagement;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","UserManagement","users","setUsers","navigate","fetchUsers","response","fetch","ok","data","json","console","error","statusText","socket","WebSocket","onopen","log","onmessage","event","JSON","parse","onerror","onclose","close","toggleBlock","id","map","user","blocked","deleteUser","filter","className","children","onClick","length","name","email","lastSeen","colSpan"],"sources":["C:/Users/user/Desktop/userPortalTwo/userPortalTwo/src/components/UserManagement.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"../pages/UserManagement.css\"; // Correct path to UserManagement.css in pages folder\r\n\r\nfunction UserManagement() {\r\n  const [users, setUsers] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  // Fetch users when the component mounts\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []); // Empty dependency array ensures this only runs once on mount\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const response = await fetch(\"http://localhost:5000/users\");\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setUsers(data); // Update the state with the fetched users\r\n      } else {\r\n        console.error(\"Error fetching users:\", response.statusText);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching users:\", error);\r\n    }\r\n  };\r\n\r\n  // WebSocket connection for live updates (optional)\r\n  useEffect(() => {\r\n    const socket = new WebSocket('ws://localhost:5000/ws');\r\n    \r\n    socket.onopen = () => {\r\n      console.log('WebSocket connected');\r\n    };\r\n    \r\n    socket.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      console.log('Received data from WebSocket:', data);\r\n      // You can update the state based on the message received from the WebSocket\r\n    };\r\n    \r\n    socket.onerror = (error) => {\r\n      console.log('WebSocket error:', error);\r\n    };\r\n    \r\n    socket.onclose = () => {\r\n      console.log('WebSocket connection closed');\r\n    };\r\n    \r\n    // Cleanup WebSocket connection on component unmount\r\n    return () => {\r\n      socket.close();\r\n    };\r\n  }, []);\r\n\r\n  const toggleBlock = (id) => {\r\n    setUsers(users.map(user => \r\n      user.id === id ? { ...user, blocked: !user.blocked } : user\r\n    ));\r\n  };\r\n\r\n  const deleteUser = (id) => {\r\n    setUsers(users.filter(user => user.id !== id));\r\n  };\r\n\r\n  return (\r\n    <div className=\"user-management-container\">\r\n      <h2>User Management</h2>\r\n      <button onClick={() => navigate(\"/\")}>Go to Login</button>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th>Email</th>\r\n            <th>Last Seen</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {users.length > 0 ? (\r\n            users.map(user => (\r\n              <tr key={user.id}>\r\n                <td>{user.name}</td>\r\n                <td>{user.email}</td>\r\n                <td>{user.lastSeen || \"N/A\"}</td>\r\n                <td>\r\n                  <button onClick={() => toggleBlock(user.id)}>\r\n                    {user.blocked ? \"Unblock\" : \"Block\"}\r\n                  </button>\r\n                  <button onClick={() => deleteUser(user.id)}>Delete</button>\r\n                </td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan=\"4\">No users found</td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserManagement;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}